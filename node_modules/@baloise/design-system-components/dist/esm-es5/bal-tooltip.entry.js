import{__awaiter,__generator}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-853c3f3f.js";import{L as Logger}from"./log-01623e2c.js";import{B as BEM}from"./bem-1b28532d.js";import{b as balBrowser}from"./browser-9199b5e2.js";import{b as balDevice}from"./device-c28cde6d.js";import{a as autoUpdate,c as computePosition,s as shift,f as flip,o as offset,b as arrow}from"./floating-ui.dom.esm-fd52c63a.js";var showContainerElement=function(t){if(t){showElement(t)}};var hideContainerElement=function(t){if(t){hideElement(t)}};var showArrowElement=function(t){if(t){showElement(t)}};var hideArrowElement=function(t){if(t){Object.assign(t.style,{left:"",top:"",display:"none",visibility:"hidden"})}};var showElement=function(t){if(t){t.style.setProperty("display","block");t.style.setProperty("visibility","visible")}};var hideElement=function(t){if(t){t.style.removeProperty("display");t.style.removeProperty("visibility")}};var balTooltipCss=":host{--bal-tooltip-container-background:var(--bal-color-primary-6);--bal-tooltip-max-width:auto;--bal-tooltip-radius:var(--bal-radius-normal);--bal-tooltip-shadow:var(--bal-shadow-large);--bal-tooltip-arrow-background:var(--bal-color-primary-6);--bal-tooltip-font-family:var(--bal-font-family-text);--bal-tooltip-font-size:var(--bal-size-small)}:host{position:static;display:inline;z-index:var(--bal-z-index-tooltip)}.bal-tooltip__container{background-color:var(--bal-tooltip-container-background);display:none;visibility:hidden;color:#fff;padding:var(--bal-space-x-small);border-radius:var(--bal-tooltip-radius);-webkit-box-shadow:var(--bal-tooltip-shadow);box-shadow:var(--bal-tooltip-shadow);width:var(--bal-tooltip-max-width);position:absolute;top:0;left:0}.bal-tooltip__inner{overflow-y:auto;max-height:calc(var(--bal-app-height, 100%) - 8rem)}.bal-tooltip__inner__content{width:100%;font-family:var(--bal-tooltip-font-family);font-size:var(--bal-tooltip-font-size)}.bal-tooltip__arrow{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;width:.5rem;height:.5rem;background:var(--bal-tooltip-arrow-background);-webkit-transform:rotate(45deg);transform:rotate(45deg);display:none;visibility:hidden}.bal-tooltip-variant-popover-trigger,.bal-tooltip-permanent-trigger{z-index:calc(var(--bal-z-index-tooltip) + 1) !important;position:relative !important}";var __decorate=undefined&&undefined.__decorate||function(t,e,i,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,i,r);else for(var l=t.length-1;l>=0;l--)if(n=t[l])a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a;return o>3&&a&&Object.defineProperty(e,i,a),a};var Tooltip=function(){function t(t){registerInstance(this,t);this.balWillAnimate=createEvent(this,"balWillAnimate",7);this.balDidAnimate=createEvent(this,"balDidAnimate",7);this.tooltipId="bal-to-".concat(tooltipIds++);this.reference="";this.placement="bottom";this.offset=0;this.presented=false;this.contentWidth=undefined}t.prototype.createLogger=function(t){this.log=t};t.prototype.contentWidthChanged=function(t,e){if(t!==e){if(t===undefined){this.el.style.removeProperty("--bal-tooltip-max-width")}else{this.el.style.setProperty("--bal-tooltip-max-width","".concat(this.contentWidth,"px"))}}};t.prototype.componentDidLoad=function(){var t=this;this.contentWidthChanged(this.contentWidth,0);if(!balDevice.hasTouchScreen){var e=[];var i=[];e=["mouseenter","focus"];i=["mouseleave","blur"];e.forEach((function(e){if(t.triggerElement){t.triggerElement.addEventListener(e,(function(){return t.present()}))}}));i.forEach((function(e){if(t.triggerElement){t.triggerElement.addEventListener(e,(function(){return t.dismiss()}))}}))}};t.prototype.present=function(){return __awaiter(this,void 0,void 0,(function(){var t,e;var i=this;return __generator(this,(function(r){if(!this.trigger&&balBrowser.hasDocument){t=Array.from(document.querySelectorAll('[id="'.concat(this.reference,'"]')))[0];this.trigger=t}if(this.trigger&&this.containerEl&&this.arrowEl){this.balWillAnimate.emit();e=this.trigger.attributes.getNamedItem("bal-tooltip-placement");if(e){this.placement=e.value}else{this.placement=this.placement}showContainerElement(this.containerEl);showArrowElement(this.arrowEl);this.trigger.classList.add("bal-tooltip-trigger");this.presented=true;this.cleanup=autoUpdate(this.trigger,this.containerEl,(function(){i.update()}));this.balDidAnimate.emit();return[2,true]}return[2,false]}))}))};t.prototype.dismiss=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this.containerEl&&this.arrowEl&&this.trigger){this.balWillAnimate.emit();if(this.cleanup){this.cleanup()}this.trigger.classList.remove("bal-tooltip-trigger");hideContainerElement(this.containerEl);hideArrowElement(this.arrowEl);this.presented=false;this.balDidAnimate.emit();return[2,true]}return[2,false]}))}))};t.prototype.update=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){if(this.trigger&&this.containerEl&&this.arrowEl){this.balWillAnimate.emit();computePosition(this.trigger,this.containerEl,{placement:this.placement,middleware:[shift(),flip(),offset(8),arrow({element:this.arrowEl,padding:4})]}).then((function(e){var i;var r=e.x,o=e.y,a=e.middlewareData,n=e.placement;var l=n.split("-")[0];var s={top:"bottom",right:"left",bottom:"top",left:"right"}[l];if(t.containerEl){Object.assign(t.containerEl.style,{left:"".concat(r,"px"),top:"".concat(o,"px")})}if(a.arrow&&t.arrowEl){var c=a.arrow;Object.assign(t.arrowEl.style,(i={left:r!=null&&c.x!=null?"".concat(c.x,"px"):"",top:o!=null&&c.y!=null?"".concat(c.y,"px"):"",right:"",bottom:""},i[s]="".concat(-4,"px"),i))}}));this.balDidAnimate.emit();return[2,true]}return[2,false]}))}))};Object.defineProperty(t.prototype,"triggerElement",{get:function(){return document.querySelector('[id="'.concat(this.reference,'"]'))},enumerable:false,configurable:true});t.prototype.render=function(){var t=this;var e=BEM.block("tooltip");var i=e.element("container");var r=e.element("arrow");var o=e.element("inner");var a=o.element("content");return h(Host,{class:Object.assign({},e.class()),role:"dialog","aria-hidden":"".concat(this.presented!==true),"aria-modal":"".concat(this.presented===true),"aria-presented":"".concat(this.presented===true)},h("div",{class:Object.assign({},i.class()),ref:function(e){return t.containerEl=e}},h("div",{class:Object.assign({},r.class()),ref:function(e){return t.arrowEl=e}}),h("bal-stack",{layout:"vertical",class:Object.assign({},o.class())},h("div",{class:Object.assign({},a.class()),ref:function(e){return t.contentEl=e},"data-test":"bal-tooltip-content"},h("slot",null)))))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{contentWidth:["contentWidthChanged"]}},enumerable:false,configurable:true});return t}();__decorate([Logger("bal-tooltip")],Tooltip.prototype,"createLogger",null);var tooltipIds=0;Tooltip.style={css:balTooltipCss};export{Tooltip as bal_tooltip};