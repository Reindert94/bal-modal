import{h as t,r as e,c as a,H as i,g as s}from"./p-3d62c8c0.js";import{s as l,d as n}from"./p-d46cbedf.js";import{l as r}from"./p-9a3d9e17.js";import{B as o,i as h}from"./p-88b452f0.js";import{L as d}from"./p-585cea76.js";import{d as c}from"./p-560a582c.js";import{L as b}from"./p-4fe58c43.js";import{b as u,n as m}from"./p-fec51065.js";import{B as _}from"./p-61996a75.js";import{L as g}from"./p-323ae504.js";import{i as f}from"./p-9a929c20.js";import{N as p}from"./p-6238764a.js";import{l as y}from"./p-139408ac.js";import{c as v,d as w}from"./p-ac5a2b91.js";import{d as k}from"./p-ba7c87d4.js";import"./p-3e8ff66b.js";import"./p-97b591c9.js";import"./p-add1e9ec.js";import"./p-d81412d0.js";import"./p-2adecc8c.js";import"./p-f146219b.js";import"./p-350daa19.js";function x(t,e,a){return`${a}-${l(`${e}`,2,"0")}-${l(`${t}`,2,"0")}`}function C(t,e,a,i,s){const n=[],h=function(t,e){if(!(e<1||t<0))return new Date(t,e,0).getDate()}(t,e),d=function(t,e){if(!(e<1||e>12||t<0))return new Date(t,e-1,1)}(t,e);if(void 0!==h&&d){const d=function(){const t=new Date;return`${t.getFullYear()}-${l(`${t.getMonth()+1}`,2,"0")}-${l(`${t.getDate()}`,2,"0")}`}(),c=o.fromISO(a),b=o.fromISO(i),u=t=>!r(s)&&!s(t);for(let a=1;a<=h;a++){const i=x(a,e,t);n.push({day:a,month:e,year:t,isoDate:i,fullDate:o.fromISO(i).toFormat(),today:d===i,disabled:c.isAfter(i)||b.isBefore(i)||u(i)})}}return n}function j(t,e){if(e<1||t<0)return 1;const a=new Date(t,e-1,1).getDay();return 0===a?7:a}function D(t){return["en","de","fr","it","nl","es","pl","pt","sv","fi"].includes(t)?t:"de"}function V(t,e){const a=[];for(let i=t;i<=e;i++)a.push({value:i,label:`${i}`,disabled:!1});return a}function O(t,e,a,i){const s=D(t),l=o.infoMonths({format:"long",locale:s});let n=0;if(a&&void 0!==e){const t=o.fromISO(a);t.isValid&&(n=e>t.year?12:t.month||n)}let r=12;if(i&&void 0!==e){const t=o.fromISO(i);t.isValid&&(r=e<t.year?0:t.month||r)}return l.map(((t,e)=>({label:t,value:e+1,disabled:e<n-1||e>r-1})))}const M=({name:e,isVisible:a,girdHeight:i,list:s,todayValue:l,selectedValue:n,onSelect:r,ref:o})=>{const h=_.block("date-calendar").element("body").element("list");return t("ul",{class:Object.assign(Object.assign(Object.assign({},h.class()),h.modifier(e).class()),h.modifier("visible").class(a)),"aria-hidden":a?"false":"true",style:{height:i-2-8-8+"px"},ref:t=>o?o(t):void 0},s.map((a=>t("li",{id:`${e}-${a.value}`},t("button",{class:Object.assign(Object.assign(Object.assign(Object.assign({},h.element("item").class()),h.element("item").modifier("today").class(a.value===l)),h.element("item").modifier("selected").class(a.value===n)),h.element("item").modifier("disabled").class(a.disabled)),tabIndex:-1,onClick:()=>r(a)},a.label)))))},P=({isVisible:e,ref:a,grid:i,weekdays:s,selectedDate:l,firstDayOfWeek:n,onSelectDay:r})=>{const o=_.block("date-calendar").element("body").element("grid");return t("div",{role:"grid",class:Object.assign(Object.assign({},o.class()),o.modifier("visible").class(e)),"aria-hidden":e?"false":"true",ref:t=>a(t)},t("div",{role:"row",class:Object.assign({},o.element("head").class())},s.map((e=>t("span",{role:"columnheader","aria-label":e.ariaLabel,title:e.ariaLabel},e.textContent)))),t("div",{role:"row",class:Object.assign({},o.element("body").class()),style:{"--bal-date-first-week-day":`${n}`}},i.map((e=>t("bal-date-calendar-cell",Object.assign({},e,{selected:e.isoDate===l,onBalSelectDay:({detail:t})=>r(t)}))))))},B=({language:e,onClickSelectMonthAndYear:a,monthFullNames:i,month:s,year:l,isCalendarVisible:n,isListVisible:r,onClickPreviousMonth:o,onClickNextMonth:d})=>{const c=_.block("date-calendar").element("nav"),b=h[e].nextMonth,u=h[e].previousMonth,m=h[e].selectMonth;return t("div",{class:Object.assign({},c.class())},t("div",{class:Object.assign({},c.modifier("start").class())},t("button",{title:m,"aria-label":m,tabIndex:-1,"data-test":"change-year-month",onClick:a},t("span",null,i[s-1]," ",l),t("bal-icon",{name:"caret-up",color:"primary",size:"small",turn:n}))),t("div",{class:Object.assign({},c.modifier("end").class()),style:{display:r?"none":"flex"}},t("button",{title:u,"aria-label":u,onClick:o,tabIndex:-1,"data-test":"previous-month"},t("bal-icon",{name:"caret-left",color:"primary",size:"small"})),t("button",{title:b,"aria-label":b,onClick:d,tabIndex:-1,"data-test":"next-month"},t("bal-icon",{name:"caret-right",color:"primary",size:"small"}))))};var $=function(t,e,a,i){var s,l=arguments.length,n=l<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,i);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(n=(l<3?s(n):l>3?s(e,a,n):s(e,a))||n);return l>3&&n&&Object.defineProperty(e,a,n),n};const z=class{constructor(t){e(this,t),this.balChange=a(this,"balChange",7),this.onSelectDay=t=>{this.valueChanged(t,this.selectedDate),this.balChange.emit(this.selectedDate)},this.onClickNextMonth=()=>{let t=this.year,e=this.month+1;e>12&&(e=1,t+=1),this.generateGridByMonthAndYear(e,t)},this.onClickPreviousMonth=()=>{let t=this.year,e=this.month-1;e<1&&(e=12,t-=1),this.generateGridByMonthAndYear(e,t)},this.onClickSelectMonthAndYear=async()=>{if(!0===this.isCalendarVisible){if(this.isCalendarVisible=!1,this.isYearListVisible=!0,this.isMonthListVisible=!1,await u(),this.yearListEl){const t=this.yearListEl.querySelector(`#year-${this.year}`);this.yearListEl.scrollTop=t?t.offsetTop-76:0}}else this.isCalendarVisible=!0,this.isYearListVisible=!1,this.isMonthListVisible=!1},this.onClickYear=t=>{this.isYearListVisible=!1,this.isMonthListVisible=!0,this.generateGridByMonthAndYear(this.month,t)},this.onClickMonth=t=>{this.isYearListVisible=!1,this.isMonthListVisible=!1,this.isCalendarVisible=!0,this.generateGridByMonthAndYear(t,this.year)},this.selectedDate="",this.monthFullNames=[],this.weekdays=[],this.months=[],this.years=[],this.calendarGrid=[],this.firstDayOfWeek=0,this.month=0,this.year=0,this.language=c.language,this.isCalendarVisible=!0,this.isYearListVisible=!1,this.isMonthListVisible=!1,this.value=void 0,this.defaultDate=void 0,this.allowedDates=void 0,this.min=void 0,this.max=void 0,this.minYearProp=void 0,this.maxYearProp=void 0}createLogger(t){this.log=t}valueChanged(t,e){if(t!==e){const e=o.fromISO(t);e.isValid?(this.generateGridByDate(e),this.selectedDate=e.toISODate()):(this.generateGridByDefaultDate(),this.selectedDate="")}}rangePropChanged(){this.months=O(this.language,this.year,this.min,this.max),this.years=V(this.minYear,this.maxYear)}yearRangePropChanged(){this.years=V(this.minYear,this.maxYear)}connectedCallback(){this.generateGridByDefaultDate(),this.valueChanged(this.value,void 0)}async configChanged(t){this.years=V(this.minYear,this.maxYear),this.months=O(t.language,this.year,this.min,this.max),this.weekdays=function(t){const e=D(t),a=o.infoWeekdays({format:"short",locale:e}),i=o.infoWeekdays({format:"long",locale:e});return a.map(((t,e)=>({ariaLabel:i[e],textContent:t})))}(t.language),this.monthFullNames=o.infoMonths({format:"long",locale:this.language}),this.language=t.language}swipeListener({left:t,right:e}){t?this.onClickNextMonth():e&&this.onClickPreviousMonth()}get minYear(){if(void 0===this.minYearProp){const t=(new Date).getFullYear()-100;return this.min&&o.fromISO(this.min).year||t}return this.minYearProp}get maxYear(){if(void 0===this.maxYearProp){const t=(new Date).getFullYear()+50;return this.max&&o.fromISO(this.max).year||t}return this.maxYearProp}generateGridByDate(t){void 0!==t.year&&void 0!==t.month&&this.generateGridByMonthAndYear(t.month,t.year)}generateGridByDefaultDate(){const t=o.fromISO(this.defaultDate);if(t.isValid)this.generateGridByDate(t);else{const t=new Date;this.month=t.getMonth()+1,this.year=t.getFullYear(),this.calendarGrid=C(this.year,this.month,this.min,this.max,this.allowedDates),this.firstDayOfWeek=j(this.year,this.month)}}generateGridByMonthAndYear(t,e){this.month===t&&this.year===e||(this.calendarGrid=C(e,t,this.min,this.max,this.allowedDates),this.firstDayOfWeek=j(e,t)),this.month=t,this.year=e}render(){var e;const a=new Date,s=a.getFullYear(),l=a.getMonth()+1,n=(null===(e=this.gridEl)||void 0===e?void 0:e.clientHeight)||0,r=_.block("date-calendar"),o=r.element("body"),h=r.element("foot");return t(i,{class:Object.assign({},r.class())},t(B,{language:this.language,monthFullNames:this.monthFullNames,month:this.month,year:this.year,isCalendarVisible:this.isCalendarVisible,isListVisible:this.isMonthListVisible||this.isYearListVisible,onClickSelectMonthAndYear:this.onClickSelectMonthAndYear,onClickPreviousMonth:this.onClickPreviousMonth,onClickNextMonth:this.onClickNextMonth}),t("div",{class:Object.assign({},o.class())},t(P,{isVisible:this.isCalendarVisible,grid:this.calendarGrid,weekdays:this.weekdays,firstDayOfWeek:this.firstDayOfWeek,selectedDate:this.selectedDate,ref:t=>this.gridEl=t,onSelectDay:t=>this.onSelectDay(t)}),t(M,{name:"year",isVisible:this.isYearListVisible,girdHeight:n,todayValue:s,selectedValue:this.year,list:this.years,ref:t=>this.yearListEl=t,onSelect:t=>this.onClickYear(t.value)}),t(M,{name:"month",isVisible:this.isMonthListVisible,girdHeight:n,todayValue:l,selectedValue:this.month,list:this.months,onSelect:t=>this.onClickMonth(t.value)})),t("div",{class:Object.assign({},h.class())},t("slot",null)))}get el(){return s(this)}static get watchers(){return{value:["valueChanged"],min:["rangePropChanged"],max:["rangePropChanged"],minYearProp:["yearRangePropChanged"],maxYearProp:["yearRangePropChanged"]}}};$([d("bal-date-calendar")],z.prototype,"createLogger",null),$([b()],z.prototype,"configChanged",null),$([g({mobileOnly:!0})],z.prototype,"swipeListener",null),z.style=':host{--bal-date-first-week-day:0;--bal-date-calendar-background:var(--bal-color-red-3)}:host{--bal-date-first-week-day:0;--bal-date-calendar-background:var(--bal-color-red-3)}:host{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;background:var(--bal-color-white);border-radius:var(--bal-radius-normal)}.bal-date-calendar__nav{display:-ms-flexbox;display:flex;width:calc(100% - 1rem);-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding:.5rem;gap:.5rem}.bal-date-calendar__nav--start>button{display:-ms-flexbox;display:flex;gap:.5rem}.bal-date-calendar__nav--end{display:-ms-flexbox;display:flex;gap:.5rem}.bal-date-calendar__nav button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:var(--bal-radius-normal);font-family:var(--bal-font-family-text);font-weight:var(--bal-weight-regular);color:var(--bal-color-text-primary);border:none;background:rgba(0,0,0,0);text-align:center;font-size:var(--bal-size-normal);line-height:var(--bal-line-height-normal);-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;outline:none;min-height:2rem;min-width:2rem;padding:.25rem;border-radius:var(--bal-button-radius);font-family:var(--bal-font-family-title);font-weight:var(--bal-weight-bold)}@media (hover: hover)and (pointer: fine){.bal-date-calendar__nav button:not(.bal-date-calendar__nav button--selected):not(.bal-date-calendar__nav button--disabled):hover{background:var(--bal-color-light-blue-1)}}.bal-date-calendar__nav button:not(.bal-date-calendar__nav button--selected):not(.bal-date-calendar__nav button--disabled):active{background:var(--bal-color-light-blue-2)}.bal-date-calendar__nav button--today:not(.bal-date-calendar__nav button--selected):not(.bal-date-calendar__nav button--disabled){color:var(--bal-color-light-blue-3);font-weight:var(--bal-weight-bold)}@media (hover: hover)and (pointer: fine){.bal-date-calendar__nav button--today:not(.bal-date-calendar__nav button--selected):not(.bal-date-calendar__nav button--disabled):hover{color:var(--bal-color-text-primary)}}.bal-date-calendar__nav button--today:not(.bal-date-calendar__nav button--selected):not(.bal-date-calendar__nav button--disabled):active{color:var(--bal-color-text-primary)}.bal-date-calendar__nav button--selected{background:var(--bal-color-primary);color:var(--bal-color-text-white);font-weight:var(--bal-weight-bold)}.bal-date-calendar__nav button--disabled{cursor:default;background:rgba(0,0,0,0);color:var(--bal-color-text-grey-light)}.bal-date-calendar__body{display:block}.bal-date-calendar__body__grid{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.5rem;height:0;padding-top:0;padding-bottom:0;visibility:hidden}.bal-date-calendar__body__grid--visible{height:auto;padding-top:.5rem;padding-bottom:.5rem;visibility:visible}.bal-date-calendar__body__grid__head{position:relative;display:grid;grid-template-columns:repeat(7, 1fr);-webkit-column-gap:.5rem;-moz-column-gap:.5rem;column-gap:.5rem;row-gap:.5rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.bal-date-calendar__body__grid__head::after{position:absolute;content:"";height:2px;width:calc(100% + 1rem);bottom:0;left:-0.5rem;right:-0.5rem;background:var(--bal-color-border-grey)}.bal-date-calendar__body__grid__head span{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:2rem;width:2rem;font-family:var(--bal-font-family-title);font-weight:var(--bal-weight-bold);font-size:var(--bal-size-normal);line-height:var(--bal-line-height-normal);-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.bal-date-calendar__body__grid__body{display:grid;grid-template-columns:repeat(7, 1fr);-webkit-column-gap:.5rem;-moz-column-gap:.5rem;column-gap:.5rem;row-gap:.5rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding-top:.5rem}.bal-date-calendar__body__grid__body>.bal-date-calendar-cell{width:2rem;height:2rem;text-align:center;font-size:var(--bal-size-normal);line-height:var(--bal-line-height-normal);-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.bal-date-calendar__body__grid__body>.bal-date-calendar-cell:first-child{grid-column:var(--bal-date-first-week-day)}.bal-date-calendar__body__list{display:none;list-style:none;margin:0;padding:0;-webkit-column-gap:.5rem;-moz-column-gap:.5rem;column-gap:.5rem;row-gap:.5rem;width:calc(100% - 1rem);overflow-y:auto;max-height:18rem;position:relative;padding:.5rem;border-top:2px solid var(--bal-color-border-grey)}.bal-date-calendar__body__list .bal-date-calendar__body__list__item{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:var(--bal-radius-normal);font-family:var(--bal-font-family-text);font-weight:var(--bal-weight-regular);color:var(--bal-color-text-primary);border:none;background:rgba(0,0,0,0);text-align:center;font-size:var(--bal-size-normal);line-height:var(--bal-line-height-normal);-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;outline:none;width:100%}@media (hover: hover)and (pointer: fine){.bal-date-calendar__body__list .bal-date-calendar__body__list__item:not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected):not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled):hover{background:var(--bal-color-light-blue-1)}}.bal-date-calendar__body__list .bal-date-calendar__body__list__item:not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected):not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled):active{background:var(--bal-color-light-blue-2)}.bal-date-calendar__body__list .bal-date-calendar__body__list__item--today:not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected):not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled){color:var(--bal-color-light-blue-3);font-weight:var(--bal-weight-bold)}@media (hover: hover)and (pointer: fine){.bal-date-calendar__body__list .bal-date-calendar__body__list__item--today:not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected):not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled):hover{color:var(--bal-color-text-primary)}}.bal-date-calendar__body__list .bal-date-calendar__body__list__item--today:not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected):not(.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled):active{color:var(--bal-color-text-primary)}.bal-date-calendar__body__list .bal-date-calendar__body__list__item--selected{background:var(--bal-color-primary);color:var(--bal-color-text-white);font-weight:var(--bal-weight-bold)}.bal-date-calendar__body__list .bal-date-calendar__body__list__item--disabled{cursor:default;background:rgba(0,0,0,0);color:var(--bal-color-text-grey-light)}.bal-date-calendar__body__list--visible{display:grid}.bal-date-calendar__body__list--year{grid-template-columns:repeat(4, 1fr)}.bal-date-calendar__body__list--month{grid-template-columns:repeat(2, 1fr)}.bal-date-calendar-cell{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:var(--bal-radius-normal);font-family:var(--bal-font-family-text);font-weight:var(--bal-weight-regular);color:var(--bal-color-text-primary);border:none;background:rgba(0,0,0,0);text-align:center;font-size:var(--bal-size-normal);line-height:var(--bal-line-height-normal);-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;outline:none;width:2rem;height:2rem}@media (hover: hover)and (pointer: fine){.bal-date-calendar-cell:not(.bal-date-calendar-cell--selected):not(.bal-date-calendar-cell--disabled):hover{background:var(--bal-color-light-blue-1)}}.bal-date-calendar-cell:not(.bal-date-calendar-cell--selected):not(.bal-date-calendar-cell--disabled):active{background:var(--bal-color-light-blue-2)}.bal-date-calendar-cell--today:not(.bal-date-calendar-cell--selected):not(.bal-date-calendar-cell--disabled){color:var(--bal-color-light-blue-3);font-weight:var(--bal-weight-bold)}@media (hover: hover)and (pointer: fine){.bal-date-calendar-cell--today:not(.bal-date-calendar-cell--selected):not(.bal-date-calendar-cell--disabled):hover{color:var(--bal-color-text-primary)}}.bal-date-calendar-cell--today:not(.bal-date-calendar-cell--selected):not(.bal-date-calendar-cell--disabled):active{color:var(--bal-color-text-primary)}.bal-date-calendar-cell--selected{background:var(--bal-color-primary);color:var(--bal-color-text-white);font-weight:var(--bal-weight-bold)}.bal-date-calendar-cell--disabled{cursor:default;background:rgba(0,0,0,0);color:var(--bal-color-text-grey-light)}';class L{constructor(t){this._options=t,this._position=0,this._positionEnd=0,this._isRangeSelection=!1,t.component&&t.component.nativeInput&&(this._position=t.component.nativeInput.selectionStart||0,this._positionEnd=t.component.nativeInput.selectionEnd||0,this._isRangeSelection=this._position!==this._positionEnd)}get isRangeSelection(){return this._isRangeSelection}get value(){return this._options.isBackspace&&this._position>0?this._position-1:this._position}set value(t){this._position=t<0?0:t>this._options.mask.maxLength?this._options.mask.maxLength:t}toStart(){this.value=0}toEnd(){const t=this.getTarget();t&&(this.value=t.value.length)}next(t=1){const e=this._position+t;return e<=this._options.mask.maxLength&&(this._position=e),this._position}previous(t=1){const e=this._position-t;return this._position=e>=0?e:0,this._position}submit(){const t=this.getTarget();t&&t.selectionStart!==this._position&&t.selectionEnd!==this._position&&(t.selectionStart=this._position,t.selectionEnd=this._position)}getTarget(){if(this._options.component&&this._options.component.nativeInput)return this._options.component.nativeInput}}class R{constructor(t){this._options=t,this._value="",this._options.component&&this._options.component.nativeInput&&(this._value=this._options.component.nativeInput.value),this.position=new L(this._options)}get target(){if(this._options.component&&this._options.component.nativeInput)return this._options.component.nativeInput}get value(){return this._value}set value(t){this._value=t}get focused(){return this._options.component.focused}isValueEmpty(){return""===this.value||null==this.value}preventDefault(){this._options.event.preventDefault&&this._options.event.preventDefault()}stopPropagation(){this.preventDefault(),this._options.event.stopPropagation&&this._options.event.stopPropagation()}async submit(t="input",e){this.target&&(this.target.value=this.value,"blur"!==t&&"tab"!==t&&this.position.submit(),this._options.component&&("input"!==t&&"tab"!==t||this._options.component.balInput.emit(this.value),("change"===t||"blur"===t)&&void 0!==e))&&this._options.component.value!==e&&(this._options.component.value=e,this._options.component.balChange.emit(e))}}class S extends R{get clipboardData(){var t;return null===(t=this._options.event.clipboardData)||void 0===t?void 0:t.getData("text")}}class A extends R{}class K extends R{get key(){return this._options.event.key}get isCtrlOrCommandKey(){return this._options.event.metaKey||this._options.event.ctrlKey}get isBackspaceKey(){return"Backspace"===this._options.event.key}get isWhiteSpaceKey(){return" "===this._options.event.key}get isDeleteKey(){return"Delete"===this._options.event.key||"Del"===this._options.event.key}get isNumberKey(){return K.NUMBER_KEYS.includes(this._options.event.key)}get isNavigationKey(){return K.NAVIGATION_KEYS.includes(this._options.event.key)}get isSelectAllCommand(){return(this._options.event.ctrlKey||this._options.event.metaKey)&&"a"===this.key}get isCopyCommand(){return(this._options.event.ctrlKey||this._options.event.metaKey)&&"c"===this.key}get isPasteCommand(){return(this._options.event.ctrlKey||this._options.event.metaKey)&&"v"===this.key}getCharAt(t=this.position.value){return this.value.charAt(t)}getCharAtBackspacePosition(){return this.getCharAt(this.position.value-1)}setChar(t=this._options.event.key,e=this.position.value){this.value=this.value.substring(0,e)+t+this.value.substring(e+1)}}K.NUMBER_KEYS=["0","1","2","3","4","5","6","7","8","9"],K.NAVIGATION_KEYS=["Home","End","ArrowLeft","Left","ArrowRight","Right","Tab","Enter","Esc","Escape"];class I extends R{get locale(){return this._options.event.locale}}class F extends R{}class N extends R{get newValue(){return this._options.event.newValue}get oldValue(){return this._options.event.oldValue}get didValueChange(){return this.newValue!==this.oldValue}}class H{constructor(t){this._isSeparator=!1,this._allowedKeys=[],this._locale="de-CH",this._from=t.from||0,this._to=t.to||0,this._isSeparator=void 0!==t.isSeparator&&t.isSeparator,this._mask=t.mask||"_",this._allowedKeys=t.allowedKeys?t.allowedKeys:this.allowedKeys,this._format=t.format}format(t){return this._format?this._format(t.replace(this.mask,""),this._locale,this.mask):t}get isSeparator(){return this._isSeparator}get to(){return this._to}get from(){return this._from}get mask(){return y(this._mask)?this._mask(this._locale):this._mask}get allowedKeys(){return this._allowedKeys}onI18nChange(t){this._locale=t}getValueOfTheBlock(t){return t.slice(this._from,this._to)}isTouched(t){return!this.getValueOfTheBlock(t).split("").every((t=>t===this.mask))}verifyAllowedKeyHits(t){return!(!this.isSeparator||t!==this.mask)||this.allowedKeys.indexOf(t)>=0}}class E{constructor(t=[]){this._list=t}get lastPosition(){return this._list[this._list.length-1].to}get list(){return this._list}set list(t){this._list=t}clone(){return new E([...this._list])}findByIndex(t,e=this.list){return e.find((e=>e.from<=t&&t<e.to))}getPlaceholderMask(){const t=[];return this.list.forEach((e=>{const a=e.to-e.from;for(let i=0;i<a;i++)t.push(e.mask)})),t.join("")}getRawValueWithoutMaskByContext(t){return this.getRawValueWithoutMask(t.value)}getRawValueWithoutMask(t){if(t){let e=[];const a=t.split("");for(let t=0;t<a.length;t++){const i=a[t],s=this.findByIndex(t);e.push(s&&!s.isSeparator?i.replace(s.mask,""):i)}return e=e.filter((t=>t)),this.list.filter((t=>t.isSeparator)).length===e.length?"":e.join("")}return""}formatBlocks(t,e){let a=`${t}`;for(let t=0;t<this.list.length;t++){const i=this.list[t];if(e!==t&&!i.isSeparator&&i.isTouched(a)){const t=i.getValueOfTheBlock(a),e=i.format(t);a=a.substring(0,i.from)+e+a.substring(i.to)}}return a}getBlockIndexFromPosition(t){const e=this.list.reduce(((t,e)=>t+e.to-e.from),0);if(t===e)return this.list.length-1;const a=this.list.findIndex((e=>e.from<=t&&t<e.to));return a<0?void 0:Math.min(e,a)}verifyCallOfNextSeparator(t,e){if(this.list.length-1>e){const a=this.list[e+1];if(a.isSeparator&&a.mask===t)return!0}return!1}}class T{constructor(t=[]){this.inputMode="text",this.locale="de-CH",this.blocks=new E(t)}onLocaleChange(t,e,a){if(t.target){const e=t.value.split("");for(let t=0;t<e.length;t++){const i=e[t],s=this.blocks.findByIndex(t),l=a.findByIndex(t);s&&l&&(s.isSeparator||i===l.mask)&&(e[t]=s.mask)}t.value=e.join("")}}onFocus(t){}onBlur(t){}onChange(t){t.submit("change",this.onParseValue(t.value))}onNavigationDown(t,e,a){}onSelectAll(t,e,a){}onPaste(t,e,a){t.value=t.clipboardData||"",t.position.toEnd()}onBlockChange(t,e,a){t.setChar(),t.position.next();const i=this.blocks.list[a+1];t.position.value===e.to&&i&&i.isSeparator&&t.position.next()}onBackspaceDown(t,e,a){if(t.position.previous(),!e.isSeparator){t.setChar(e.mask);const i=this.blocks.list[a-1];t.position.value===e.from&&i&&i.isSeparator&&t.position.previous()}}onDeleteDown(t,e,a){t.setChar(e.mask),t.position.next();const i=this.blocks.list[a+1];t.position.value===e.to&&i&&i.isSeparator&&t.position.next()}onValueChanged(t){const e=this.onFormatValue(t.newValue),a=t.focused&&""===e?this.blocks.getPlaceholderMask():e;t.value=a,t.position.toEnd()}onParseValue(t){return t?t.trim():t||""}onFormatValue(t){return t?t.trim():t||""}fireI18nChange(t){const e=this.blocks.clone(),a=`${t.locale}`;this.locale=t.locale,this.blocks.list.forEach((e=>e.onI18nChange(t.locale))),this.onLocaleChange(t,a,e)}fireValueChanged(t){t.didValueChange&&this.onValueChanged(t)}firePaste(t){const e=this.blocks.getBlockIndexFromPosition(t.position.value);void 0!==e&&(this.onPaste(t,this.blocks.list[e],e),this.onChange(t))}fireClick(t){this.blocks.getPlaceholderMask()===t.value&&t.position.toStart()}fireFocus(t){t.target&&t.isValueEmpty()&&this.resetInputValueWithMask(t),this.onFocus(t)}fireBlur(t){t.target&&(this.isValueEmptyMask(t)?this.emptyInputValue(t):(this.onBlur(t),t.submit("blur",this.onParseValue(t.value))))}fireKeyDown(t){const e=t.isBackspaceKey?Math.max(0,t.position.value-1):t.position.value,a=this.blocks.getBlockIndexFromPosition(e);if(e>=this.blocks.lastPosition&&!t.isNavigationKey&&!t.isSelectAllCommand)return t.preventDefault(),void t.stopPropagation();if(void 0===a||t.position.isRangeSelection)t.preventDefault(),t.isBackspaceKey||t.isDeleteKey?this.resetInputValueWithMask(t):this.blocks.list[0].verifyAllowedKeyHits(t.key)&&this.onBlockChange(t,this.blocks.list[0],0);else{const e=this.blocks.list[a];if(t.isNavigationKey)this.onNavigationDown(t,e,a);else if(t.isSelectAllCommand)this.onSelectAll(t,e,a);else if(t.isCopyCommand);else if(t.isPasteCommand);else if(t.isBackspaceKey)t.preventDefault(),this.onBackspaceDown(t,e,a);else if(t.isDeleteKey)t.preventDefault(),this.onDeleteDown(t,e,a);else if(t.isWhiteSpaceKey){if(t.preventDefault(),"."===t.value[t.position.value]){t.stopPropagation();const e=t.value;t.value=e.substring(0,t.position.value)+"_"+e.substring(t.position.value+1)}}else if(e.verifyAllowedKeyHits(t.key))t.preventDefault(),this.onBlockChange(t,e,a);else if(this.blocks.verifyCallOfNextSeparator(t.key,a)&&(t.preventDefault(),t.position.value>this.blocks.list[a].from)){const i=this.blocks.list[a+1],s=t.value,l=e.getValueOfTheBlock(s),n=e.format(l);t.value=s.substring(0,e.from)+n+s.substring(e.to),t.position.value=i.to}const i=this.blocks.getBlockIndexFromPosition(t.position.value);if(i&&!t.isBackspaceKey){const e=this.blocks.formatBlocks(t.value,i),a=t.position.value;t.value=e,t.position.value=a}}}resetInputValueWithMask(t){t.value=this.blocks.getPlaceholderMask(),t.position.toStart()}isValueEmptyMask(t){return this.blocks.getPlaceholderMask()===t.value}emptyInputValue(t){t.value="",t.submit("blur",t.value)}}class Y extends T{constructor(){super([new H({from:0,to:2,allowedKeys:[...p],format:(t,e,a)=>Number.isNaN(parseInt(t,10))?`${a}${a}`:t.padStart(2,"0"),mask:t=>this.dayMask[t.split("-")[0]]||this.dayMask.de}),new H({from:2,to:3,mask:t=>n(t),isSeparator:!0}),new H({from:3,to:5,allowedKeys:[...p],format:(t,e,a)=>Number.isNaN(parseInt(t,10))?`${a}${a}`:t.padStart(2,"0"),mask:t=>this.monthMask[t.split("-")[0]]||this.monthMask.de}),new H({from:5,to:6,mask:t=>n(t),isSeparator:!0}),new H({from:6,to:10,allowedKeys:[...p],mask:t=>this.yearMask[t.split("-")[0]]||this.yearMask.de})]),this.maxLength=10,this.minLength=10,this.dayMask={de:"T",en:"D",fr:"J",it:"G",nl:"D",es:"D",pl:"D",pt:"D",sv:"D",fi:"M"},this.monthMask={de:"M",en:"M",fr:"M",it:"M",nl:"M",es:"M",pl:"M",pt:"M",sv:"M",fi:"K"},this.yearMask={de:"J",en:"Y",fr:"A",it:"A",nl:"J",es:"A",pl:"R",pt:"A",sv:"Ã…",fi:"V"}}onParseValue(t){if(t){const e=o.fromAnyFormat(this.blocks.getRawValueWithoutMask(t));if(e.isValid)return e.toISODate()}return""}onFormatValue(t){if(t){const e=o.fromISO(t);if(e.isValid)return e.toFormat()}return""}onPaste(t,e,a){const i=o.fromAnyFormat(t.clipboardData||"");i.isValid&&(t.value=i.toFormat(),t.position.toEnd())}onBlur(t){const e=this.blocks.getRawValueWithoutMaskByContext(t),a=o.fromAnyFormat(e);if(a.isValid){const e=a.toFormat();e!==t.value&&(t.value=e)}}}class W{constructor(t){this.mask=t}get attributes(){return{inputMode:this.mask.inputMode,maxLength:this.mask.maxLength,minLength:this.mask.minLength,type:"text",autoCapitalize:"off",autoCorrect:"off",spellcheck:!1}}bindComponent(t){this.component=t}bindComponentDidLoad(){this.component&&this.component.nativeInput&&(this.component.nativeInput.value=this.component.value||""),this.bindValueChanged(this.component.value,void 0)}bindConfigChanged(t){const{component:e,mask:a}=this,i=new I({component:e,mask:a,event:{locale:`${t.language}-${t.region}`}});this.mask.fireI18nChange(i),i.submit()}bindValueChanged(t,e){const{component:a,mask:i}=this,s=new N({component:a,mask:i,event:{newValue:t,oldValue:e}});this.mask.fireValueChanged(s),s.submit("blur")}bindKeyDown(t){if(this.isComponentAccessible){const{component:e,mask:a}=this,i=new K({event:t,component:e,mask:a});this.mask.fireKeyDown(i),i.submit("Tab"===t.key?"tab":"input"),e.balKeyPress.emit(t)}}bindFocus(t){if(this.isComponentAccessible){const{component:e,mask:a}=this;e.focused=!0;const i=new A({event:t,component:e,mask:a});this.mask.fireFocus(i),i.submit(),e.balFocus.emit(t)}}bindBlur(t){if(this.isComponentAccessible){const{component:e,mask:a}=this;e.focused=!1;const i=new A({event:t,component:e,mask:a});this.mask.fireBlur(i),i.submit("blur"),e.balBlur.emit(t)}}bindPaste(t){if(this.isComponentAccessible){const{component:e,mask:a}=this,i=new S({event:t,component:e,mask:a});this.mask.firePaste(i),i.submit()}}bindFormReset(t){const e=t.target;e&&e.contains(this.component.el)&&(this.component.value=this.component.initialValue,this.component.inputValue=this.component.initialValue,clearTimeout(this.resetHandlerTimer),this.resetHandlerTimer=setTimeout((()=>{this.component.nativeInput&&(this.component.nativeInput.value=this.component.value||"")})))}bindClick(t){if(this.isComponentAccessible){const{component:e,mask:a}=this,i=new F({event:t,component:e,mask:a});this.mask.fireClick(i),i.submit()}}bindHostClick(t){this.isComponentAccessible||(t.preventDefault(),t.stopPropagation())}bindGlobalClick(t){this.isComponentAccessible||t.target&&t.target===this.component.el&&(t.preventDefault(),t.stopPropagation())}get isComponentAccessible(){return!this.component.disabled&&!this.component.readonly}}var G=function(t,e,a,i){var s,l=arguments.length,n=l<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,i);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(n=(l<3?s(n):l>3?s(e,a,n):s(e,a))||n);return l>3&&n&&Object.defineProperty(e,a,n),n};const J=class{constructor(t){e(this,t),this.balKeyPress=a(this,"balKeyPress",7),this.balChange=a(this,"balChange",7),this.balInput=a(this,"balInput",7),this.balBlur=a(this,"balBlur",7),this.balFocus=a(this,"balFocus",7),this.inputId="bal-i-date-"+q++,this.inheritedAttributes={},this.maskAdapter=new W(new Y),this.inputValue=this.value,this.initialValue=this.value||"",this.focused=!1,this.isGrouped=!1,this.ariaForm=k,this.name=this.inputId,this.invalid=!1,this.required=!1,this.disabled=!1,this.readonly=!1,this.placeholder=void 0,this.clickable=!1,this.autocomplete="off",this.hasIconRight=!1,this.value=void 0}createLogger(t){this.log=t}valueChanged(t,e){this.maskAdapter.bindValueChanged(t,e)}connectedCallback(){this.maskAdapter.bindComponent(this),this.isGrouped=m("bal-input-group",this.el)}componentDidLoad(){this.maskAdapter.bindComponentDidLoad()}componentWillRender(){this.inheritedAttributes=f(this.el,["aria-label","tabindex","title"])}async configChanged(t){this.maskAdapter.bindConfigChanged(t)}resetHandler(t){this.maskAdapter.bindFormReset(t)}listenOnClick(t){this.maskAdapter.bindGlobalClick(t)}async setFocus(){v(this)}async setBlur(){w(this)}getInputElement(){return Promise.resolve(this.nativeInput)}async setAriaForm(t){this.ariaForm=Object.assign({},t)}render(){const e=_.block("input-date");return t(i,{onClick:t=>this.maskAdapter.bindHostClick(t),class:Object.assign({},e.class())},t("input",Object.assign({class:{input:!0,"is-disabled":this.disabled||this.readonly,"is-danger":this.invalid,"is-clickable":this.clickable&&!(this.disabled||this.readonly),"bal-focusable":!this.disabled,"has-icon-right":this.hasIconRight},"data-testid":"bal-date-input",ref:t=>this.nativeInput=t,id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-invalid":!0===this.invalid?"true":"false","aria-disabled":this.disabled?"true":null,required:this.required,disabled:this.disabled,readonly:this.readonly,autoComplete:this.autocomplete},this.maskAdapter.attributes,this.inheritedAttributes,{placeholder:this.placeholder,value:this.inputValue,onKeyDown:t=>this.maskAdapter.bindKeyDown(t),onClick:t=>this.maskAdapter.bindClick(t),onFocus:t=>this.maskAdapter.bindFocus(t),onBlur:t=>this.maskAdapter.bindBlur(t),onPaste:t=>this.maskAdapter.bindPaste(t)})))}get el(){return s(this)}static get watchers(){return{value:["valueChanged"]}}};G([d("bal-input-date")],J.prototype,"createLogger",null),G([b()],J.prototype,"configChanged",null);let q=0;J.style=".bal-input-date{display:block;width:100%;-ms-flex:1;flex:1}.bal-input-date input:not(:-moz-placeholder-shown){letter-spacing:.4px}.bal-input-date input:not(:-ms-input-placeholder){letter-spacing:.4px}.bal-input-date input:not(:placeholder-shown){letter-spacing:.4px}";export{z as bal_date_calendar,J as bal_input_date}