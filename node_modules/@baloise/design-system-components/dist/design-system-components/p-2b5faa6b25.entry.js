import{r as t,c as i,h as s,H as a,g as h}from"./p-3d62c8c0.js";import{c as e}from"./p-d46cbedf.js";import{a as o,c as l,o as r,f as n}from"./p-c39c93c6.js";import{B as d,i as c}from"./p-88b452f0.js";import{B as p}from"./p-61996a75.js";import{L as b}from"./p-585cea76.js";import{i as u}from"./p-9a929c20.js";import{s as m}from"./p-ac5a2b91.js";import{d as f}from"./p-560a582c.js";import{L as v}from"./p-4fe58c43.js";import{m as y}from"./p-fec51065.js";import{d as j}from"./p-ba7c87d4.js";import"./p-9a3d9e17.js";import"./p-3e8ff66b.js";import"./p-97b591c9.js";import"./p-add1e9ec.js";import"./p-d81412d0.js";var g=function(t,i,s,a){var h,e=arguments.length,o=e<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,a);else for(var l=t.length-1;l>=0;l--)(h=t[l])&&(o=(e<3?h(o):e>3?h(i,s,o):h(i,s))||o);return e>3&&o&&Object.defineProperty(i,s,o),o};const w=class{constructor(s){t(this,s),this.balInput=i(this,"balInput",7),this.balChange=i(this,"balChange",7),this.balWillAnimate=i(this,"balWillAnimate",7),this.balDidAnimate=i(this,"balDidAnimate",7),this.balBlur=i(this,"balBlur",7),this.balFocus=i(this,"balFocus",7),this.balInputClick=i(this,"balInputClick",7),this.balIconClick=i(this,"balIconClick",7),this.balPopoverPrepare=i(this,"balPopoverPrepare",7),this.inputId="bal-da-"+x++,this.inheritedAttributes={},this.onIconClick=async()=>{this.triggerIcon?await this.toggle():await this.open()},this.onInputClick=async()=>{this.triggerIcon||await this.open()},this.onCalendarChange=t=>{m(t),this.value=t.detail,this.balChange.emit(this.value),this.closeOnSelect&&this.close()},this.onInputInput=t=>{if(m(t),this.balInput.emit(t.detail),t.detail){const i=d.fromAnyFormat(t.detail);i.isValid&&(this.calendarValue=i.toISODate())}},this.onInputChange=t=>{m(t),this.value=t.detail,this.balChange.emit(this.value)},this.onInputFocus=t=>{m(t),this.balFocus.emit(t.detail)},this.onInputBlur=t=>{m(t),this.balBlur.emit(t.detail)},this.onKeyPress=async({detail:t})=>{e(t)&&!this.triggerIcon&&(this.isExpanded?await this.close():await this.open())},this.isExpanded=!1,this.language=f.language,this.calendarValue=void 0,this.ariaForm=j,this.name=this.inputId,this.invalid=!1,this.required=!1,this.disabled=!1,this.readonly=!1,this.freeSolo=!1,this.placeholder=void 0,this.triggerIcon=!1,this.closeOnSelect=!0,this.value=void 0,this.min=void 0,this.max=void 0,this.minYearProp=void 0,this.maxYearProp=void 0,this.defaultDate=void 0,this.allowedDates=void 0,this.debounce=0}createLogger(t){this.log=t}valueChanged(){this.calendarValue=this.value}debounceChanged(){this.balChange=y(this.balChange,this.debounce)}connectedCallback(){this.valueChanged()}componentWillLoad(){this.inheritedAttributes=u(this.el,["aria-label","tabindex","title"])}async listenToKeydown(t){!this.isExpanded||"Escape"!==t.key&&"Esc"!==t.key||(t.preventDefault(),await this.close())}async listenOnKeyup(t){"Tab"===t.key&&!this.el.contains(document.activeElement)&&this.isExpanded&&await this.close()}async listenOnclick(t){this.isExpanded&&!this.el.contains(t.target)&&await this.close()}async listenOnPopoverPrepare(t){this.inputId!==t.detail&&await this.close()}async configChanged(t){this.language=t.language}async open(){return this.expand()}async close(){return this.collapse()}async toggle(){return this.isExpanded?this.collapse():this.expand()}async select(t){const i=d.fromISO(t);i.isValid&&(this.value=i.toISODate(),this.calendarValue=this.value)}async setFocus(){var t;null===(t=this.inputEl)||void 0===t||t.setFocus()}async setBlur(){var t;null===(t=this.inputEl)||void 0===t||t.setBlur()}async getInputElement(){var t;return null===(t=this.inputEl)||void 0===t?void 0:t.getInputElement()}async setAriaForm(t){var i;this.ariaForm=Object.assign({},t),null===(i=this.inputEl)||void 0===i||i.setAriaForm(t)}async expand(){return this.referenceEl&&this.floatingEl&&(this.balPopoverPrepare.emit(this.inputId),this.balWillAnimate.emit(),this.isExpanded=!0,this.popupCleanup=o(this.referenceEl,this.floatingEl,(()=>{this.updatePosition(this.referenceEl,this.floatingEl)}))),this.isExpanded}async collapse(){return this.floatingEl&&(this.balWillAnimate.emit(),this.isExpanded=!1,this.popupCleanup&&this.popupCleanup(),this.balDidAnimate.emit()),this.isExpanded}updatePosition(t,i){l(t,i,{placement:"bottom-start",middleware:[r(4),n({crossAxis:!1})]}).then((({x:t,y:s})=>{Object.assign(i.style,{left:`${t}px`,top:`${s}px`}),this.balDidAnimate.emit()}))}render(){const t=p.block("date"),i=t.element("icon"),h=t.element("popup");return s(a,{id:this.inputId,class:Object.assign({},t.class())},s("bal-input-group",{invalid:this.invalid,readonly:this.readonly,disabled:this.disabled,ref:t=>this.referenceEl=t},s("bal-input-date",Object.assign({required:this.required,placeholder:this.placeholder,value:this.value,invalid:this.invalid,readonly:this.readonly,disabled:this.disabled,onClick:this.onInputClick,onBalInput:this.onInputInput,onBalChange:this.onInputChange,onBalFocus:this.onInputFocus,onBalBlur:this.onInputBlur,onBalKeyPress:this.onKeyPress,ref:t=>this.inputEl=t},this.inheritedAttributes)),this.freeSolo?"":s("bal-icon",{name:"date",role:"button",tabindex:-1,class:Object.assign(Object.assign({},i.class()),i.modifier("clickable").class(!this.disabled&&!this.readonly)),"is-right":!0,color:this.disabled||this.readonly?"grey":this.invalid?"danger":"primary",onClick:this.onIconClick,"aria-label":c[this.language].toggleDatepicker,"aria-haspopup":"true","aria-expanded":this.isExpanded?"true":"false"})),s("div",{role:"dialog",class:Object.assign(Object.assign({},h.class()),h.modifier("visible").class(this.isExpanded)),ref:t=>this.floatingEl=t,"aria-hidden":`${!0!==this.isExpanded}`,"aria-presented":`${!0===this.isExpanded}`},s("bal-date-calendar",{value:this.calendarValue,min:this.min,max:this.max,minYearProp:this.minYearProp,maxYearProp:this.maxYearProp,defaultDate:this.defaultDate,allowedDates:this.allowedDates,onBalChange:this.onCalendarChange})))}get el(){return h(this)}static get watchers(){return{value:["valueChanged"],debounce:["debounceChanged"]}}};g([b("bal-date")],w.prototype,"createLogger",null),g([v()],w.prototype,"configChanged",null);let x=0;w.style=":root{--bal-date-popup-z-index:var(--bal-z-index-tooltip);--bal-date-popup-shadow:var(--bal-shadow-normal);--bal-date-popup-radius:var(--bal-radius-normal)}:root{--bal-z-index-tooltip:1300}.bal-date{display:block;font-family:var(--bal-font-family-text);width:100%}.bal-date__icon--clickable{cursor:pointer}.bal-date__popup{display:none;width:-webkit-max-content;width:-moz-max-content;width:max-content;position:absolute;top:0;left:0;z-index:var(--bal-date-popup-z-index);-webkit-box-shadow:var(--bal-date-popup-shadow);box-shadow:var(--bal-date-popup-shadow);border-radius:var(--bal-date-popup-radius)}.bal-date__popup--visible{display:block}";export{w as bal_date}